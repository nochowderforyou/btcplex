{{with .ClamourInfo}}
<h2>Recent CLAMour Petitions</h2>

<dl class="dl-horizontal">
  <dt>Start Block</dt>
  <dd>{{.StartBlock}}</dd>

  <dt>End Block</dt>
  <dd>{{.EndBlock}}</dd>

  <dt>Petitions</dt>
  <dd>{{len .Petitions}}</dd>
</dl>

<hr>

<div id="chart_div"></div>

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load('visualization', '1.0', {'packages':['corechart']});
  google.setOnLoadCallback(drawChart);

  function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Petition');
    data.addColumn('number', 'Blocks');

    {{range .Petitions}}
    data.addRow([ {{.Id}}, {{len .Blocks}} ]);
    {{end}}
    data.addRow(['None', {{.Petitions | getremainingblocks}}])

    var options = {'title':'Petitions From Block {{.StartBlock}} to {{.EndBlock}}',
                   'width':480,
                   'height':480,
                   'sliceVisibilityThreshold': .05};

    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }
</script>


<div class="table-responsive">
<table class="table table-striped table-condensed">
  <thead>
    <tr>
      <th>Petition ID</th>
      <th>Supporting Blocks</th>
      <th>Block Count</th>
    </tr>
  </thead>
  <tbody>
    {{range .Petitions}}
      <tr>
        <td style="vertical-align:middle">{{.Id}}</td>
        <td style="vertical-align:middle">
        {{if .Blocks}}
          {{.Blocks | formatblocklist}}
        {{end}}
        </td>
        <td style="vertical-align:middle">{{len .Blocks}}</td>
      </tr>
    {{end}}
  </tbody>
</table>
</div>
{{end}}
